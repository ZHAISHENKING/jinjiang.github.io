<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 用Sass重新整理自己的博客主题样式 · 囧克斯</title><meta name="description" content="用Sass重新整理自己的博客主题样式 - 勾三股四"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://jinjiang.github.io/atom.xml" title="囧克斯"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">用Sass重新整理自己的博客主题样式</h1><div class="post-info">2013年6月5日</div><div class="post-content"><p><img src="http://sass-lang.com/images/sass.gif" alt="Sass"></p>
<p>远远关注<a href="http://sass-lang.com" target="_blank" rel="noopener">Sass</a>很久了，今天终于鼓起勇气写了<a href="http://jiongks.sinaapp.com/usr/themes/iambig-3d/style.sass" target="_blank" rel="noopener">我的第一个Sass文件</a></p>
<h3 id="Sass简介"><a href="#Sass简介" class="headerlink" title="Sass简介"></a>Sass简介</h3><p>一种CSS的预处理程序，基于Ruby运行。安装过程和相关的准备工作非常简单：</p>
<ol start="0">
<li>当然首先要安装<a href="http://www.ruby-lang.org/" target="_blank" rel="noopener">Ruby</a></li>
<li><code>gem install ruby</code>，必要的环境下需要在命令前加上<code>sudo</code></li>
<li>进入我的博客主题文件夹，运行<code>sass-convert style.css style.sass</code>，把我的css文件先转换成sass文件</li>
<li>运行<code>sass --watch style.sass:style.css</code>，使得程序自动把<code>style.sass</code>文件接下来的任何改动自动同步转换到<code>style.css</code></li>
</ol>
<p>这时，新的Sass文件就创建完毕了！^_^ 去碎觉……</p>
<p>呵呵，开个玩笑。其实这样的Sass文件虽然格式上没有任何问题，但和直接撰写CSS几乎没区别。而Sass除了可以让我们少写几个花括号和分号之外，其实还有很多实用的特性是我们真正需要的。</p>
<p>无论如何，现在的这个Sass文件是一个整理的基础，接下来，我们就来一步一步整理这个文件，同时也一步一步熟悉Sass的特性。</p>
<a id="more"></a>
<h3 id="Variables-变量与计算"><a href="#Variables-变量与计算" class="headerlink" title="Variables: 变量与计算"></a>Variables: 变量与计算</h3><p>我把CSS文件中通用的字体、颜色等等属性值归纳了出来，并找到其中的相关性，比如文本框的边框颜色始终比链接的文字颜色亮一些，即：</p>
<pre><code>a {
  color: #0c0;
}

input:not([type]),
input[type=&quot;text&quot;],
input[type=&quot;password&quot;] {
  border: 2px lime solid;
}
</code></pre><p>在Sass中将其改写为：</p>
<pre><code>$color-link: #0c0

a
  color: $color-link

input:not([type]),
input[type=&quot;text&quot;],
input[type=&quot;password&quot;]
  border: 2px lighten($color-link, 10%) solid
</code></pre><p>即可，输出的结果不变。</p>
<h3 id="Nesting：选择器嵌套"><a href="#Nesting：选择器嵌套" class="headerlink" title="Nesting：选择器嵌套"></a>Nesting：选择器嵌套</h3><p>把嵌套着的选择器添加不同的缩进，同时把重复表达的外层选择器去掉。如：</p>
<pre><code>h2 {
  margin: 0.75em 0;
  padding: 0.25em 0.5em;
  background-color: rgba(0, 204, 0, 0.4);
  color: #339933;
}

h2 strong {
  color: white;
}

h2 a {
  color: #009900;
}

h2 a:hover {
  background: yellow;
  color: black;
}
</code></pre><p>可以转换为：</p>
<pre><code>h2
  margin: 0.75em 0
  padding: 0.25em 0.5em
  background-color: rgba($color-link, 0.4) // 链接颜色，透明度40%
  color: desaturate($color-link, 50%) // 链接颜色，饱和度减少50%

  strong
    color: white

  a
    color: darken($color-link, 10%) // 链接颜色，变暗10%

    &amp;:hover
      background: $color-mark // 特殊标记的颜色
      color: black
</code></pre><h3 id="Mixin：将可重用的CSS属性值混入不同的CSS规则当中"><a href="#Mixin：将可重用的CSS属性值混入不同的CSS规则当中" class="headerlink" title="Mixin：将可重用的CSS属性值混入不同的CSS规则当中"></a>Mixin：将可重用的CSS属性值混入不同的CSS规则当中</h3><p>这个特性是我花最多时间整理的，整理过后发现整个文件结构真的清晰很多。</p>
<h4 id="提取出成套的样式"><a href="#提取出成套的样式" class="headerlink" title="提取出成套的样式"></a>提取出成套的样式</h4><p>比如我的博客主题中，3D的标题和按钮就是两套集成度重用性都很高的样式，我创建了<code>@mixin title-3d</code>和<code>@mixin button-3d</code>两个大的属性集合：</p>
<pre><code>@mixin title-3d
  ...
  &amp;::before,
  &amp;::after
    ...
  ...

@mixin button-3d
  ...
  &amp;::before,
  &amp;::after
    ...
  &amp;:hover::before
    ...
  &amp;:hover::after
    ...
  ...
</code></pre><p>随后我把这些属性集合应用到了标题和按钮上：</p>
<pre><code>h2
  @include title-3d

button,
input[type=&quot;button&quot;],
input[type=&quot;submit&quot;],
.button-3d
  @include button-3d
</code></pre><h4 id="继续归纳和抽象"><a href="#继续归纳和抽象" class="headerlink" title="继续归纳和抽象"></a>继续归纳和抽象</h4><p>整理完上面这两个大的集合之后，我发现，其实3d的标题和按钮样式上其实也有很多想通的地方，于是我进一步抽象出了一些3d模型的通用集合：</p>
<pre><code>@mixin short-transform
  -webkit-transition: -webkit-transform 0.3s

@mixin transform-origin-0
  -webkit-transform-origin: 50% 50%
@mixin transform-origin-1
  left: 0
  top: 0
  -webkit-transform-origin: 0% 0%
@mixin transform-origin-2
  right: 0
  top: 0
  -webkit-transform-origin: 100% 0%
@mixin transform-origin-3
  right: 0
  bottom: 0
  -webkit-transform-origin: 100% 100%
@mixin transform-origin-4
  left: 0
  bottom: 0
  -webkit-transform-origin: 0% 100%

@mixin init-3d
  @include short-transform
  @include transform-origin-0
  -webkit-transform-style: preserve-3d

@mixin p-element
  position: absolute
  content: &quot;&quot;
</code></pre><p>然后到之前的集合把这些通用集合抽象出来：</p>
<pre><code>@mixin title-3d
  @include init-3d
  ...

  &amp;::after,
  &amp;::before
    @include p-element
    @include short-transform
    background-color: lighten($color-text, 30%)

  &amp;::before
    height: 100%
    width: $button-3d-height*2
    @include transform-origin-1
    ...

  &amp;::after
    height: 100%
    width: $button-3d-height*2
    @include transform-origin-2
    ...
</code></pre><h4 id="统一封装不同浏览器的CSS前缀"><a href="#统一封装不同浏览器的CSS前缀" class="headerlink" title="统一封装不同浏览器的CSS前缀"></a>统一封装不同浏览器的CSS前缀</h4><pre><code>@mixin box-sizing($sizing: border-box)
  -moz-box-sizing: $sizing
  box-sizing: $sizing

@mixin transform($value...)
  -webkit-transform: $value
  transform: $value

@mixin transform-origin($value)
  -webkit-transform-origin: $value
  transform-origin: $value

@mixin transform-3d($value: preserve-3d)
  -webkit-transform-style: $value
  transform-style: $value

@mixin transform-perspective($value: 350px)
  -webkit-perspective: $value
  perspective: $value

@mixin transition($value...)
  -webkit-transition: $value
  transition: $value

@mixin transition-transform($duration: 0.3s)
  -webkit-transition: -webkit-transform $duration
  transition: transform $duration

...
</code></pre><h3 id="Extend：选择器的继承"><a href="#Extend：选择器的继承" class="headerlink" title="Extend：选择器的继承"></a>Extend：选择器的继承</h3><p>其实这个特性和mixin很多时候可以二选一使用，比如这里的<code>.button-3d</code>选择器可以不必和<code>button</code>、<code>input[type=&quot;button&quot;]</code>、<code>input[type=&quot;submit&quot;]</code>写在一起，可以写成：</p>
<pre><code>.button-3d
  ...

button,
input[type=&quot;button&quot;],
input[type=&quot;submit&quot;]
  @extend .button-3d
</code></pre><p>不过我这里这样写的必要性不太大，所以就没有实际的例子可以分享了。</p>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>最终<a href="http://jiongks.sinaapp.com/usr/themes/iambig-3d/style.sass" target="_blank" rel="noopener">我的第一个Sass文件</a>就这样整理完毕了。(p.s.当然这个文件未来可能还是会有改动，届时可能会和本篇文章描述的内容不符)</p>
<p>经过上面这几轮代码的整理，这个Sass文件才真的很Sass了。回顾这次整理的过程，先后用到了变量、运算、嵌套、重用属性等Sass的特性，简单明了，而且<code>sass --watch</code>命令、<code>sass-convert</code>命令可以方便的对文件进行监听和格式转换。我几乎在感觉不到学习成本的情况下提高了开发效率。这里也推荐大家试试看。</p>
</div></article></div></main><footer><div class="paginator"><a href="/blog/qin-sheng-effect-in-the-national-team/" class="prev">PREV</a><a href="/blog/connect-middleware-manual/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://jinjiang.github.io">勾三股四</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>